import unittest
from random import sample
from unittest.mock import Mock, patch
from manager import *


class UnityTests(unittest.TestCase):

    def test_prep_data(self):
        self.assertEqual(prep_data('tester.csv')[0], {'It can be a separating line in your hair or a role in a play': 'a part', 'Parts of the Arabian and Libyan deserts are found in this African country': 'Egypt', '"I Never Told You" this alliteratively named singer hit Disney\'s Top 30 with "Fallin\' For You"; wait, I just did': 'Colbie Caillat', 'These parts of a peach tree are glossy green, pointed & lance shaped': 'leaves', '5 x 10 x 15': '750', "It's a type of bounce house, or a dance made famous by Michael Jackson": 'the moonwalk', 'A graphic representation of information': 'a chart', 'The family history you wrote for school might include entering the U.S. at this island in New York Bay': 'Ellis Island', 'Lead singer Ryan Tedder of this band has "All The Right Moves"': 'OneRepublic', "These parts of a peach tree grow at nodes along the shoots of the previous season's growth; they're usually pink": 'blossoms', '2 x 1,035': '2,070', 'This device whose name is from the Italian for "springboard" was perfected in the 1930s': 'a trampoline', 'Composer Wolfgang': 'Mozart', '99.95% of the mass of an atom is in this part': 'the nucleus', "Park View of Chula Vista, California beat Taipei 6-3 to win this organization's 2009 World Series": 'the Little League', "This hero of several books is 11 when he discovers he's a wizard": 'Harry Potter', 'Say the name of <a href="http://www.j-archive.com/media/2010-07-06_DJ_26.jpg" target="_blank">this</a> type of mollusk you see': 'an octopus', 'A 7.0 magnitude earthquake in this Caribbean country Jan. 12, 2010 brought a world outpouring of aid': 'Haiti', "It's the 4-letter name of the pleated skirt worn by men in Scotland": 'a kilt', 'During this plant process, carbon dioxide & water combine with light energy to create oxygen & glucose': 'photosynthesis', "The perfect waves of New Zealand's Piha Beach were the site for the 2010 World Junior Championships of this": 'surfing', 'This city, the seat of Clark County, Nevada, has been called "the entertainment capital of the world"': 'Las Vegas', 'Say <a href="http://www.j-archive.com/media/2010-07-06_DJ_27.jpg" target="_blank">this</a> state that was admitted to the Union in 1859': 'Oregon', 'This car company has been in the news for widespread recalls of its Corollas & other models': 'Toyota', 'As an adjective, it can mean proper; as a verb, "to grade papers"': 'correct', 'The wedge is an adaptation of the simple machine called the inclined this': 'plane', 'With a mighty leap of 5\'1", David Mosely set the U.S. 10 & under record in this event back in 1977': 'the high jump', '<a href="http://www.j-archive.com/media/2010-07-06_DJ_14.jpg" target="_blank">This dog breed seen here</a> is a loyal and protective companion': 'a German Shepherd', 'Say the name of <a href="http://www.j-archive.com/media/2010-07-06_DJ_28.jpg" target="_blank">this</a> bug; don\'t worry, it doesn\'t breathe fire': 'the dragonfly', '(<a href="http://www.j-archive.com/media/2010-07-06_DJ_21.wmv">Jimmy of the Clue Crew demonstrates, putting his arm over his mouth.</a>) To avoid spreading germs & maybe flu, we learned the sneeze named for this character made famous in an 1897 book': 'Dracula', 'Maize is another word for this': 'corn', 'Of the 6 noble gases on the periodic table, it is the lightest': 'helium', '11-year-old Ashlyn White won a 2009 U.S. youth title in this martial art in which you try to throw your opponent': 'judo', 'In 1751 the Penn Provincial Assembly placed the order for this symbol of freedom, now in Philadelphia': 'the Liberty Bell', 'Say the name of <a href="http://www.j-archive.com/media/2010-07-06_DJ_29.jpg" target="_blank">these</a> big trees; it has a color in it': 'redwood', "In a surprise, Ted Kennedy's old Senate seat in this state went to a Republican in a January 2010 election": 'Massachusetts'})
        
    @patch('random.sample')
    def test_question_generation(self, mock_sample: Mock):
        mock_sample.side_effect = [['It can be a separating line in your hair or a role in a play', 'Parts of the Arabian and Libyan deserts are found in this African country', '"I Never Told You" this alliteratively named singer hit Disney\'s Top 30 with "Fallin\' For You"; wait, I just did', 'These parts of a peach tree are glossy green, pointed & lance shaped', '5 x 10 x 15', "It's a type of bounce house, or a dance made famous by Michael Jackson", 'A graphic representation of information', 'The family history you wrote for school might include entering the U.S. at this island in New York Bay', 'Lead singer Ryan Tedder of this band has "All The Right Moves"', "These parts of a peach tree grow at nodes along the shoots of the previous season's growth; they're usually pink", '2 x 1,035', 'This device whose name is from the Italian for "springboard" was perfected in the 1930s', 'Composer Wolfgang', '99.95% of the mass of an atom is in this part', "Park View of Chula Vista, California beat Taipei 6-3 to win this organization's 2009 World Series", "This hero of several books is 11 when he discovers he's a wizard", 'Say the name of <a href="http://www.j-archive.com/media/2010-07-06_DJ_26.jpg" target="_blank">this</a> type of mollusk you see', 'A 7.0 magnitude earthquake in this Caribbean country Jan. 12, 2010 brought a world outpouring of aid', "It's the 4-letter name of the pleated skirt worn by men in Scotland", 'During this plant process, carbon dioxide & water combine with light energy to create oxygen & glucose']]
        result = question_generation({'It can be a separating line in your hair or a role in a play': 'a part', 'Parts of the Arabian and Libyan deserts are found in this African country': 'Egypt', '"I Never Told You" this alliteratively named singer hit Disney\'s Top 30 with "Fallin\' For You"; wait, I just did': 'Colbie Caillat', 'These parts of a peach tree are glossy green, pointed & lance shaped': 'leaves', '5 x 10 x 15': '750', "It's a type of bounce house, or a dance made famous by Michael Jackson": 'the moonwalk', 'A graphic representation of information': 'a chart', 'The family history you wrote for school might include entering the U.S. at this island in New York Bay': 'Ellis Island', 'Lead singer Ryan Tedder of this band has "All The Right Moves"': 'OneRepublic', "These parts of a peach tree grow at nodes along the shoots of the previous season's growth; they're usually pink": 'blossoms', '2 x 1,035': '2,070', 'This device whose name is from the Italian for "springboard" was perfected in the 1930s': 'a trampoline', 'Composer Wolfgang': 'Mozart', '99.95% of the mass of an atom is in this part': 'the nucleus', "Park View of Chula Vista, California beat Taipei 6-3 to win this organization's 2009 World Series": 'the Little League', "This hero of several books is 11 when he discovers he's a wizard": 'Harry Potter', 'Say the name of <a href="http://www.j-archive.com/media/2010-07-06_DJ_26.jpg" target="_blank">this</a> type of mollusk you see': 'an octopus', 'A 7.0 magnitude earthquake in this Caribbean country Jan. 12, 2010 brought a world outpouring of aid': 'Haiti', "It's the 4-letter name of the pleated skirt worn by men in Scotland": 'a kilt', 'During this plant process, carbon dioxide & water combine with light energy to create oxygen & glucose': 'photosynthesis', "The perfect waves of New Zealand's Piha Beach were the site for the 2010 World Junior Championships of this": 'surfing', 'This city, the seat of Clark County, Nevada, has been called "the entertainment capital of the world"': 'Las Vegas', 'Say <a href="http://www.j-archive.com/media/2010-07-06_DJ_27.jpg" target="_blank">this</a> state that was admitted to the Union in 1859': 'Oregon', 'This car company has been in the news for widespread recalls of its Corollas & other models': 'Toyota', 'As an adjective, it can mean proper; as a verb, "to grade papers"': 'correct', 'The wedge is an adaptation of the simple machine called the inclined this': 'plane', 'With a mighty leap of 5\'1", David Mosely set the U.S. 10 & under record in this event back in 1977': 'the high jump', '<a href="http://www.j-archive.com/media/2010-07-06_DJ_14.jpg" target="_blank">This dog breed seen here</a> is a loyal and protective companion': 'a German Shepherd', 'Say the name of <a href="http://www.j-archive.com/media/2010-07-06_DJ_28.jpg" target="_blank">this</a> bug; don\'t worry, it doesn\'t breathe fire': 'the dragonfly', '(<a href="http://www.j-archive.com/media/2010-07-06_DJ_21.wmv">Jimmy of the Clue Crew demonstrates, putting his arm over his mouth.</a>) To avoid spreading germs & maybe flu, we learned the sneeze named for this character made famous in an 1897 book': 'Dracula', 'Maize is another word for this': 'corn', 'Of the 6 noble gases on the periodic table, it is the lightest': 'helium', '11-year-old Ashlyn White won a 2009 U.S. youth title in this martial art in which you try to throw your opponent': 'judo', 'In 1751 the Penn Provincial Assembly placed the order for this symbol of freedom, now in Philadelphia': 'the Liberty Bell', 'Say the name of <a href="http://www.j-archive.com/media/2010-07-06_DJ_29.jpg" target="_blank">these</a> big trees; it has a color in it': 'redwood', "In a surprise, Ted Kennedy's old Senate seat in this state went to a Republican in a January 2010 election": 'Massachusetts'})
        self.assertEqual(result[0], {'It can be a separating line in your hair or a role in a play': 'a part', 'Parts of the Arabian and Libyan deserts are found in this African country': 'Egypt', '"I Never Told You" this alliteratively named singer hit Disney\'s Top 30 with "Fallin\' For You"; wait, I just did': 'Colbie Caillat', 'These parts of a peach tree are glossy green, pointed & lance shaped': 'leaves', '5 x 10 x 15': '750', "It's a type of bounce house, or a dance made famous by Michael Jackson": 'the moonwalk', 'A graphic representation of information': 'a chart', 'The family history you wrote for school might include entering the U.S. at this island in New York Bay': 'Ellis Island', 'Lead singer Ryan Tedder of this band has "All The Right Moves"': 'OneRepublic', "These parts of a peach tree grow at nodes along the shoots of the previous season's growth; they're usually pink": 'blossoms', '2 x 1,035': '2,070', 'This device whose name is from the Italian for "springboard" was perfected in the 1930s': 'a trampoline', 'Composer Wolfgang': 'Mozart', '99.95% of the mass of an atom is in this part': 'the nucleus', "Park View of Chula Vista, California beat Taipei 6-3 to win this organization's 2009 World Series": 'the Little League', "This hero of several books is 11 when he discovers he's a wizard": 'Harry Potter', 'Say the name of <a href="http://www.j-archive.com/media/2010-07-06_DJ_26.jpg" target="_blank">this</a> type of mollusk you see': 'an octopus', 'A 7.0 magnitude earthquake in this Caribbean country Jan. 12, 2010 brought a world outpouring of aid': 'Haiti', "It's the 4-letter name of the pleated skirt worn by men in Scotland": 'a kilt', 'During this plant process, carbon dioxide & water combine with light energy to create oxygen & glucose': 'photosynthesis'})




if __name__ == '__main__': 
    unittest.main(argv=[''], exit=False)
